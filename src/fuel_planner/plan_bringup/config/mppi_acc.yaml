mppi_control:
  ros__parameters:
    mppi:
      K: 1000
      N: 1.0 # Horizon time in seconds
      ctl_freq: 50.0 # Control frequency in Hz (dt = 1/ctl_freq)
      sigma: 0.1
      lambda: 0.001
      Q_pos_x: 500.0
      Q_pos_y: 500.0
      Q_pos_z: 500.0
      Q_vel_x: 50.0
      Q_vel_y: 50.0
      Q_vel_z: 50.0
      R_x: 0.5
      R_y: 0.5
      R_z: 0.5
      R_rate_x: 30.0
      R_rate_y: 30.0
      R_rate_z: 30.0
      w_obs: 10.0
      a_max: 10.0
      tilt_max: 0.6
      g: 9.81

      # Lambda Auto-tuning (Jang's gradient-based method)
      auto_lambda: true
      alpha_fluctuation: 1.0   # Weight for fluctuation term
      beta_performance: 1.0    # Weight for performance term
      learning_rate: 0.1       # Gradient descent step size
      lambda_perturbation: 0.01 # For finite difference gradient

      lambda_min: 0.0001
      lambda_max: 100.0

      # Low-pass filter (optional, for smoother control)
      enable_lpf: false
      lpf_cutoff: 5.0 # Cutoff frequency in Hz
    mass: 0.98
